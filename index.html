<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>NourishLens Pro</title>

<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.14.0/dist/tf.min.js"></script>

<style>
:root {
  --bg: #050509;
  --card: #0b0b14;
  --neon: #00ffe1;
  --neon-soft: rgba(0,255,225,.6);
  --text: #e6fdf9;
}
* { box-sizing: border-box; font-family: system-ui, sans-serif; }
body {
  margin: 0;
  background: radial-gradient(circle at top, #0b0b1c, var(--bg));
  color: var(--text);
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
}
.app {
  width: 92%;
  max-width: 420px;
  background: var(--card);
  border-radius: 20px;
  padding: 18px;
  box-shadow: 0 0 25px rgba(0,255,225,.15);
}
h1 {
  text-align: center;
  color: var(--neon);
  text-shadow: 0 0 12px var(--neon-soft);
}
video {
  width: 100%;
  border-radius: 14px;
  border: 1px solid rgba(0,255,225,.3);
}
button {
  width: 100%;
  margin-top: 12px;
  padding: 12px;
  border-radius: 12px;
  border: none;
  background: linear-gradient(135deg,#00ffe1,#00b3ff);
  color: #000;
  font-weight: 600;
  cursor: pointer;
}
.result {
  margin-top: 14px;
  padding: 12px;
  border-radius: 12px;
  background: rgba(0,255,225,.05);
  border: 1px solid rgba(0,255,225,.25);
}
.neon { color: var(--neon); text-shadow: 0 0 8px var(--neon-soft); }
select {
  width: 100%;
  margin-top: 10px;
  padding: 10px;
  border-radius: 10px;
  background: #050509;
  color: var(--neon);
  border: 1px solid rgba(0,255,225,.4);
  max-height: 140px;
}
</style>
</head>

<body>
<div class="app">
  <h1>NourishLens Pro</h1>
  <video id="video" autoplay playsinline></video>
  <button id="scanBtn">Scan Food</button>
  <div id="output" class="result" style="display:none"></div>
  <select id="manualSelect" size="5" style="display:none"></select>
</div>

<script>
/* ---------------- FOOD LIST ---------------- */
const FOOD_LIST = [
  "Apple","Banana","Rice","Biryani","Pizza","Burger",
  "Dosa","Idli","Paneer","Chicken Curry","Egg","Milk",
  "Salad","Pasta","Ice Cream","Fish Curry"
];

/* ---------------- NUTRITION DATABASE ---------------- */
const NUTRITION = {
  Apple: { calories: 52, carbs: "14g", protein: "0.3g", fat: "0.2g" },
  Banana: { calories: 89, carbs: "23g", protein: "1.1g", fat: "0.3g" },
  Rice: { calories: 130, carbs: "28g", protein: "2.7g", fat: "0.3g" },
  Biryani: { calories: 290, carbs: "35g", protein: "9g", fat: "10g" },
  Pizza: { calories: 266, carbs: "33g", protein: "11g", fat: "10g" },
  Burger: { calories: 295, carbs: "30g", protein: "17g", fat: "13g" },
  Dosa: { calories: 168, carbs: "29g", protein: "4g", fat: "3g" },
  Idli: { calories: 58, carbs: "12g", protein: "2g", fat: "0.4g" },
  Paneer: { calories: 265, carbs: "6g", protein: "18g", fat: "20g" },
  "Chicken Curry": { calories: 240, carbs: "8g", protein: "20g", fat: "14g" },
  Egg: { calories: 155, carbs: "1g", protein: "13g", fat: "11g" },
  Milk: { calories: 42, carbs: "5g", protein: "3.4g", fat: "1g" },
  Salad: { calories: 80, carbs: "10g", protein: "2g", fat: "3g" },
  Pasta: { calories: 131, carbs: "25g", protein: "5g", fat: "1g" },
  "Ice Cream": { calories: 207, carbs: "24g", protein: "3.5g", fat: "11g" },
  "Fish Curry": { calories: 220, carbs: "6g", protein: "22g", fat: "12g" }
};

/* ---------------- ELEMENTS ---------------- */
const video = document.getElementById("video");
const scanBtn = document.getElementById("scanBtn");
const output = document.getElementById("output");
const manualSelect = document.getElementById("manualSelect");

/* ---------------- CAMERA ---------------- */
navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" } })
  .then(stream => video.srcObject = stream);

/* ---------------- DROPDOWN ---------------- */
FOOD_LIST.forEach(food => {
  const opt = document.createElement("option");
  opt.value = food;
  opt.textContent = food;
  manualSelect.appendChild(opt);
});

/* ---------------- SCAN (SIMULATED AI FALLBACK) ---------------- */
scanBtn.onclick = () => {
  output.style.display = "block";
  output.innerHTML = "<span class='neon'>AI unsure. Select food ðŸ‘‡</span>";
  manualSelect.style.display = "block";
};

/* ---------------- CONFIRM FOOD ---------------- */
manualSelect.onchange = () => confirmFood(manualSelect.value);

function confirmFood(food) {
  manualSelect.style.display = "none";
  const n = NUTRITION[food];
  output.innerHTML = `
    <b class="neon">${food}</b><br><br>
    Calories: ${n.calories} kcal<br>
    Carbs: ${n.carbs}<br>
    Protein: ${n.protein}<br>
    Fat: ${n.fat}
  `;
}
</script>
</body>
</html>
